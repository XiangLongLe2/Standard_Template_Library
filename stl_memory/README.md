# Memory小总结

## 内存分配和对象构造分开的精细设计

STL在配置器的核心设计点就是将内存分配和对象构造分开。

* 在stl_construct.h和st_uinitialized.h中分别定义了针对单个地址的构造函数和针对序列地址的构造函数，可以在给定的内存空间中构造对象。
* stl_alloc.h负责向内存申请空间。

## type_traits初现

C++没有函数可以直接获取对象的类型，为了对简单对象（数值等）和复杂对象（自定义的类）进行不同的构造和析构，采用了type_traits的技巧。

### 两层的内存管理机制

针对大于128bytes的内存申请，销毁，重分配，直接采用malloc等标准操作。针对小于128bytes的内存的操作，则自己生成free lists，一个对应8，16，24……128bytes的内存栈来管理，从而不需要每次都去malloc申请。

